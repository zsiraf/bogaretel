(function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.4";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?null:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,0,t):e[0]},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,Math.max(e.length-t,0)):e[e.length-1]},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s},x.bind=function(e,t){if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));var n=u.call(arguments,2);return function(){return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return t.length===0&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,f<=0?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]==null&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var O=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if(i=="[object Array]"){o=e.length,u=o==t.length;if(u)while(o--)if(!(u=O(e[o],t[o],n,r)))break}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)){o++;if(!(u=x.has(t,c)&&O(e[c],t[c],n,r)))break}if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return O(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){var r=Array(e);for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=x.invert(M.escape);var _={escape:new RegExp("["+x.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(M.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(_[e],function(t){return M[e][t]})}}),x.result=function(e,t){if(e==null)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),j.call(this,n.apply(x,e))}})};var D=0;x.uniqueId=function(e){var t=++D+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(B,function(e){return"\\"+H[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var j=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],j.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);var $j;NB.codeMirrors=[],NB.Util={distanceInDays:function(e){var t,n,r,i,s;return i=jQuery.timeago.parse(NB.nation_date),typeof i=="undefined"||typeof e=="undefined"?null:(t=864e5,s=new Date(i.getFullYear(),i.getMonth(),i.getDate()),r=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=Math.round((r-s)/t),n===0?"Today":n===-1?"Yesterday":n===1?"Tomorrow":n<-1?Math.abs(n)+" days ago":"in "+n+" days")}},NB.addLoadEvent=function(e){var t;return t=window.onload,typeof window.onload!="function"&&(window.onload=e),window.onload=function(){return t&&t(),e()}},NB.notify=function(e,t,n,r){var i,s;t==null&&(t="notice"),n==null&&(n=2),r==null&&(r=!1),NB.clear_notify(),r?s='<i id="flash-icon" class="icon-refresh animate-spin"></i>':s="",i=$('<div class="flash alert alert-'+t+' alert-static">'+s+" "+e+'<button class="close"><i class="icon-cancel"></i></button></div>'),$("body").append(i);if(n>0)return _.delay(function(){return i.fadeOut("fast")},n*1e3)},NB.set_query_parameter=function(e,t){var n,r,i,s,o,u,a;r=window.location.search||"",r=r.replace(/^\?/,""),s="",n="";if(r){o=r.split("&");for(i=u=0,a=o.length;0<=a?u<=a:u>=a;i=0<=a?++u:--u)o[i]!=null&&o[i].split("=")[0]!==e&&(s+=n+o[i],n="&")}return t!==void 0?window.location.search=s+n+(""+e+"="+t):window.location.search=s},NB.clear_notify=function(){return $(".alert-static").remove()},NB.cachedScript=function(e,t){return t=$.extend(t||{},{dataType:"script",cache:!0,url:e}),$.ajax(t)},$j=null,typeof jQuery!="undefined"&&($j=jQuery),function(e){function n(){var n=t.parse(this.title);return isNaN(n)||e(this).text(r(n)),this}function r(e){return t.inWords(i(e))}function i(e){return(new Date).getTime()-e.getTime()}function s(e,t){return e.replace(/%d/i,t)}e.timeago=function(t){return t instanceof Date?r(t):typeof t=="string"?r(e.timeago.parse(t)):r(e.timeago.parse(e(t).attr("title")))};var t=e.timeago;e.extend(e.timeago,{settings:{refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",ago:null,fromNow:null,seconds:"seconds",minute:"1 min",minutes:"%d mins",hour:"1 hour",hours:"%d hours",day:"1 day",days:"%d days",month:"1 month",months:"%d months",year:"1 year",years:"%d years"}},inWords:function(t){var n=this.settings.strings,r=n.prefixAgo,i=n.suffixAgo||n.ago;this.settings.allowFuture&&(t<0&&(r=n.prefixFromNow,i=n.suffixFromNow||n.fromNow),t=Math.abs(t));var o=t/1e3,u=o/60,a=u/60,f=a/24,l=f/365,c=o<45&&s(n.seconds,Math.round(o))||o<90&&n.minute||u<45&&s(n.minutes,Math.round(u))||u<90&&n.hour||a<24&&s(n.hours,Math.round(a))||a<48&&n.day||f<30&&s(n.days,Math.floor(f))||f<60&&n.month||f<365&&s(n.months,Math.floor(f/30))||l<2&&n.year||s(n.years,Math.floor(l));return e.trim([r,c,i].join(" "))},parse:function(t){var n=e.trim(t);return n=n.replace(/-/,"/").replace(/-/,"/"),n=n.replace(/T/," ").replace(/Z/," UTC"),n=n.replace(/([\+-]\d\d)\:?(\d\d)/," $1$2"),new Date(n)}}),e.fn.timeago=function(){var e=this;e.each(n);var r=t.settings;return r.refreshMillis>0&&setInterval(function(){e.each(n)},r.refreshMillis),e}}(jQuery),function(){function n(t,n){return n=n||"",typeof t!="string"&&(t.global&&n.indexOf("g")<0&&(n+="g"),t.ignoreCase&&n.indexOf("i")<0&&(n+="i"),t.multiline&&n.indexOf("m")<0&&(n+="m"),t=t.source),new RegExp(t.replace(/#\{(\w+)\}/g,function(t,n){var r=e.txt.regexen[n]||"";return typeof r!="string"&&(r=r.source),r}),n)}function r(e,t){return e.replace(/#\{(\w+)\}/g,function(e,n){return t[n]||""})}function i(e,t,n){var r=String.fromCharCode(t);return n!==t&&(r+="-"+String.fromCharCode(n)),e.push(r),e}function m(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function w(e,t,n){return n?!e||e.match(t)&&RegExp["$&"]===e:typeof e=="string"&&e.match(t)&&RegExp["$&"]===e}if(typeof e=="undefined"||e===null)var e={};e.txt={},e.txt.regexen={};var t={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};e.txt.htmlEscape=function(e){return e&&e.replace(/[&"'><]/g,function(e){return t[e]})},e.txt.regexSupplant=n,e.txt.stringSupplant=r,e.txt.addCharsToCharClass=i;var s=String.fromCharCode,o=[s(32),s(133),s(160),s(5760),s(6158),s(8232),s(8233),s(8239),s(8287),s(12288)];i(o,9,13),i(o,8192,8202);var u=[s(65534),s(65279),s(65535)];i(u,8234,8238),e.txt.regexen.spaces_group=n(o.join("")),e.txt.regexen.spaces=n("["+o.join("")+"]"),e.txt.regexen.invalid_chars_group=n(u.join("")),e.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/,e.txt.regexen.rtl_chars=/[\u0600-\u06FF]|[\u0750-\u077F]|[\u0590-\u05FF]|[\uFE70-\uFEFF]/mg,e.txt.regexen.non_bmp_code_pairs=/[\uD800-\uDBFF][\uDC00-\uDFFF]/mg;var a=[];i(a,1024,1279),i(a,1280,1319),i(a,11744,11775),i(a,42560,42655),i(a,1425,1471),i(a,1473,1474),i(a,1476,1477),i(a,1479,1479),i(a,1488,1514),i(a,1520,1524),i(a,64274,64296),i(a,64298,64310),i(a,64312,64316),i(a,64318,64318),i(a,64320,64321),i(a,64323,64324),i(a,64326,64335),i(a,1552,1562),i(a,1568,1631),i(a,1646,1747),i(a,1749,1756),i(a,1758,1768),i(a,1770,1775),i(a,1786,1788),i(a,1791,1791),i(a,1872,1919),i(a,2208,2208),i(a,2210,2220),i(a,2276,2302),i(a,64336,64433),i(a,64467,64829),i(a,64848,64911),i(a,64914,64967),i(a,65008,65019),i(a,65136,65140),i(a,65142,65276),i(a,8204,8204),i(a,3585,3642),i(a,3648,3662),i(a,4352,4607),i(a,12592,12677),i(a,43360,43391),i(a,44032,55215),i(a,55216,55295),i(a,65441,65500),i(a,12449,12538),i(a,12540,12542),i(a,65382,65439),i(a,65392,65392),i(a,65296,65305),i(a,65313,65338),i(a,65345,65370),i(a,12353,12438),i(a,12441,12446),i(a,13312,19903),i(a,19968,40959),i(a,173824,177983),i(a,177984,178207),i(a,194560,195103),i(a,12291,12291),i(a,12293,12293),i(a,12347,12347),e.txt.regexen.nonLatinHashtagChars=n(a.join(""));var f=[];i(f,192,214),i(f,216,246),i(f,248,255),i(f,256,591),i(f,595,596),i(f,598,599),i(f,601,601),i(f,603,603),i(f,611,611),i(f,616,616),i(f,623,623),i(f,626,626),i(f,649,649),i(f,651,651),i(f,699,699),i(f,768,879),i(f,7680,7935),e.txt.regexen.latinAccentChars=n(f.join("")),e.txt.regexen.hashSigns=/[#＃]/,e.txt.regexen.hashtagAlpha=n(/[a-z_#{latinAccentChars}#{nonLatinHashtagChars}]/i),e.txt.regexen.hashtagAlphaNumeric=n(/[a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}]/i),e.txt.regexen.endHashtagMatch=n(/^(?:#{hashSigns}|:\/\/)/),e.txt.regexen.hashtagBoundary=n(/(?:^|$|[^&a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}])/),e.txt.regexen.validHashtag=n(/(#{hashtagBoundary})(#{hashSigns})(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi),e.txt.regexen.validMentionPrecedingChars=/(?:^|[^a-zA-Z0-9_!#$%&*@＠]|RT:?)/,e.txt.regexen.atSigns=/[@＠]/,e.txt.regexen.validMentionOrList=n("(#{validMentionPrecedingChars})(#{atSigns})([a-zA-Z0-9_]{1,20})(/[a-zA-Z][a-zA-Z0-9_-]{0,24})?","g"),e.txt.regexen.validReply=n(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/),e.txt.regexen.endMentionMatch=n(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/),e.txt.regexen.validUrlPrecedingChars=n(/(?:[^A-Za-z0-9@＠$#＃#{invalid_chars_group}]|^)/),e.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/,e.txt.regexen.invalidDomainChars=r("#{punct}#{spaces_group}#{invalid_chars_group}",e.txt.regexen),e.txt.regexen.validDomainChars=n(/[^#{invalidDomainChars}]/),e.txt.regexen.validSubdomain=n(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/),e.txt.regexen.validDomainName=n(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/),e.txt.regexen.validGTLD=n(/(?:(?:aero|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|xxx)(?=[^0-9a-zA-Z]|$))/),e.txt.regexen.validCCTLD=n(/(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|sx)(?=[^0-9a-zA-Z]|$))/),e.txt.regexen.validPunycode=n(/(?:xn--[0-9a-z]+)/),e.txt.regexen.validDomain=n(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/),e.txt.regexen.validAsciiDomain=n(/(?:(?:[\-a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi),e.txt.regexen.invalidShortDomain=n(/^#{validDomainName}#{validCCTLD}$/),e.txt.regexen.validPortNumber=n(/[0-9]+/),e.txt.regexen.validGeneralUrlPathChars=n(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~@|&#{latinAccentChars}]/i),e.txt.regexen.validUrlBalancedParens=n(/\(#{validGeneralUrlPathChars}+\)/i),e.txt.regexen.validUrlPathEndingChars=n(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i),e.txt.regexen.validUrlPath=n("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))","i"),e.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'@\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i,e.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i,e.txt.regexen.extractUrl=n("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi"),e.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i,e.txt.regexen.urlHasProtocol=/^https?:\/\//i,e.txt.regexen.urlHasHttps=/^https:\/\//i,e.txt.regexen.cashtag=/[a-z]{1,6}(?:[._][a-z]{1,2})?/i,e.txt.regexen.validCashtag=n("(^|#{spaces})(\\$)(#{cashtag})(?=$|\\s|[#{punct}])","gi"),e.txt.regexen.validateUrlUnreserved=/[a-z0-9\-._~]/i,e.txt.regexen.validateUrlPctEncoded=/(?:%[0-9a-f]{2})/i,e.txt.regexen.validateUrlSubDelims=/[!$&'()*+,;=]/i,e.txt.regexen.validateUrlPchar=n("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|[:|@])","i"),e.txt.regexen.validateUrlScheme=/(?:[a-z][a-z0-9+\-.]*)/i,e.txt.regexen.validateUrlUserinfo=n("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|:)*","i"),e.txt.regexen.validateUrlDecOctet=/(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i,e.txt.regexen.validateUrlIpv4=n(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i),e.txt.regexen.validateUrlIpv6=/(?:\[[a-f0-9:\.]+\])/i,e.txt.regexen.validateUrlIp=n("(?:#{validateUrlIpv4}|#{validateUrlIpv6})","i"),e.txt.regexen.validateUrlSubDomainSegment=/(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i,e.txt.regexen.validateUrlDomainSegment=/(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i,e.txt.regexen.validateUrlDomainTld=/(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i,e.txt.regexen.validateUrlDomain=n(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i),e.txt.regexen.validateUrlHost=n("(?:#{validateUrlIp}|#{validateUrlDomain})","i"),e.txt.regexen.validateUrlUnicodeSubDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,e.txt.regexen.validateUrlUnicodeDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,e.txt.regexen.validateUrlUnicodeDomainTld=/(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,e.txt.regexen.validateUrlUnicodeDomain=n(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i),e.txt.regexen.validateUrlUnicodeHost=n("(?:#{validateUrlIp}|#{validateUrlUnicodeDomain})","i"),e.txt.regexen.validateUrlPort=/[0-9]{1,5}/,e.txt.regexen.validateUrlUnicodeAuthority=n("(?:(#{validateUrlUserinfo})@)?(#{validateUrlUnicodeHost})(?::(#{validateUrlPort}))?","i"),e.txt.regexen.validateUrlAuthority=n("(?:(#{validateUrlUserinfo})@)?(#{validateUrlHost})(?::(#{validateUrlPort}))?","i"),e.txt.regexen.validateUrlPath=n(/(\/#{validateUrlPchar}*)*/i),e.txt.regexen.validateUrlQuery=n(/(#{validateUrlPchar}|\/|\?)*/i),e.txt.regexen.validateUrlFragment=n(/(#{validateUrlPchar}|\/|\?)*/i),e.txt.regexen.validateUrlUnencoded=n("^(?:([^:/?#]+):\\/\\/)?([^/?#]*)([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$","i");var l="tweet-url list-slug",c="tweet-url username",h="tweet-url hashtag",p="tweet-url cashtag",d={urlClass:!0,listClass:!0,usernameClass:!0,hashtagClass:!0,cashtagClass:!0,usernameUrlBase:!0,listUrlBase:!0,hashtagUrlBase:!0,cashtagUrlBase:!0,usernameUrlBlock:!0,listUrlBlock:!0,hashtagUrlBlock:!0,linkUrlBlock:!0,usernameIncludeSymbol:!0,suppressLists:!0,suppressNoFollow:!0,targetBlank:!0,suppressDataScreenName:!0,urlEntities:!0,symbolTag:!0,textWithSymbolTag:!0,urlTarget:!0,invisibleTagAttrs:!0,linkAttributeBlock:!0,linkTextBlock:!0,htmlEscapeNonEntities:!0},v={disabled:!0,readonly:!0,multiple:!0,checked:!0};e.txt.tagAttrs=function(t){var n="";for(var r in t){var i=t[r];v[r]&&(i=i?r:null);if(i==null)continue;n+=" "+e.txt.htmlEscape(r)+'="'+e.txt.htmlEscape(i.toString())+'"'}return n},e.txt.linkToText=function(t,n,i,s){s.suppressNoFollow||(i.rel="nofollow"),s.linkAttributeBlock&&s.linkAttributeBlock(t,i),s.linkTextBlock&&(n=s.linkTextBlock(t,n));var o={text:n,attr:e.txt.tagAttrs(i)};return r("<a#{attr}>#{text}</a>",o)},e.txt.linkToTextWithSymbol=function(t,n,r,i,s){var o=s.symbolTag?"<"+s.symbolTag+">"+n+"</"+s.symbolTag+">":n;r=e.txt.htmlEscape(r);var u=s.textWithSymbolTag?"<"+s.textWithSymbolTag+">"+r+"</"+s.textWithSymbolTag+">":r;return s.usernameIncludeSymbol||!n.match(e.txt.regexen.atSigns)?e.txt.linkToText(t,o+u,i,s):o+e.txt.linkToText(t,u,i,s)},e.txt.linkToHashtag=function(t,n,r){var i=n.substring(t.indices[0],t.indices[0]+1),s=e.txt.htmlEscape(t.hashtag),o=m(r.htmlAttrs||{});return o.href=r.hashtagUrlBase+s,o.title="#"+s,o["class"]=r.hashtagClass,s[0].match(e.txt.regexen.rtl_chars)&&(o["class"]+=" rtl"),r.targetBlank&&(o.target="_blank"),e.txt.linkToTextWithSymbol(t,i,s,o,r)},e.txt.linkToCashtag=function(t,n,r){var i=e.txt.htmlEscape(t.cashtag),s=m(r.htmlAttrs||{});return s.href=r.cashtagUrlBase+i,s.title="$"+i,s["class"]=r.cashtagClass,r.targetBlank&&(s.target="_blank"),e.txt.linkToTextWithSymbol(t,"$",i,s,r)},e.txt.linkToMentionAndList=function(t,n,r){var i=n.substring(t.indices[0],t.indices[0]+1),s=e.txt.htmlEscape(t.screenName),o=e.txt.htmlEscape(t.listSlug),u=t.listSlug&&!r.suppressLists,a=m(r.htmlAttrs||{});return a["class"]=u?r.listClass:r.usernameClass,a.href=u?r.listUrlBase+s+o:r.usernameUrlBase+s,!u&&!r.suppressDataScreenName&&(a["data-screen-name"]=s),r.targetBlank&&(a.target="_blank"),e.txt.linkToTextWithSymbol(t,i,u?s+o:s,a,r)},e.txt.linkToUrl=function(t,n,r){var i=t.url,s=i,o=e.txt.htmlEscape(s),u=r.urlEntities&&r.urlEntities[i]||t;u.display_url&&(o=e.txt.linkTextWithEntity(u,r));var a=m(r.htmlAttrs||{});return i.match(e.txt.regexen.urlHasProtocol)||(i="http://"+i),a.href=i,r.targetBlank&&(a.target="_blank"),r.urlClass&&(a["class"]=r.urlClass),r.urlTarget&&(a.target=r.urlTarget),!r.title&&u.display_url&&(a.title=u.expanded_url),e.txt.linkToText(t,o,a,r)},e.txt.linkTextWithEntity=function(t,n){var i=t.display_url,s=t.expanded_url,o=i.replace(/…/g,"");if(s.indexOf(o)!=-1){var u=s.indexOf(o),a={displayUrlSansEllipses:o,beforeDisplayUrl:s.substr(0,u),afterDisplayUrl:s.substr(u+o.length),precedingEllipsis:i.match(/^…/)?"…":"",followingEllipsis:i.match(/…$/)?"…":""};for(var f in a)a.hasOwnProperty(f)&&(a[f]=e.txt.htmlEscape(a[f]));return a.invisible=n.invisibleTagAttrs,r("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>",a)}return i},e.txt.autoLinkEntities=function(t,n,r){r=m(r||{}),r.hashtagClass=r.hashtagClass||h,r.hashtagUrlBase=r.hashtagUrlBase||"https://twitter.com/#!/search?q=%23",r.cashtagClass=r.cashtagClass||p,r.cashtagUrlBase=r.cashtagUrlBase||"https://twitter.com/#!/search?q=%24",r.listClass=r.listClass||l,r.usernameClass=r.usernameClass||c,r.usernameUrlBase=r.usernameUrlBase||"https://twitter.com/",r.listUrlBase=r.listUrlBase||"https://twitter.com/",r.htmlAttrs=e.txt.extractHtmlAttrsFromOptions(r),r.invisibleTagAttrs=r.invisibleTagAttrs||"style='position:absolute;left:-9999px;'";var i,s,o;if(r.urlEntities){i={};for(s=0,o=r.urlEntities.length;s<o;s++)i[r.urlEntities[s].url]=r.urlEntities[s];r.urlEntities=i}var u="",a=0;n.sort(function(e,t){return e.indices[0]-t.indices[0]});var f=r.htmlEscapeNonEntities?e.txt.htmlEscape:function(e){return e};for(var s=0;s<n.length;s++){var d=n[s];u+=f(t.substring(a,d.indices[0])),d.url?u+=e.txt.linkToUrl(d,t,r):d.hashtag?u+=e.txt.linkToHashtag(d,t,r):d.screenName?u+=e.txt.linkToMentionAndList(d,t,r):d.cashtag&&(u+=e.txt.linkToCashtag(d,t,r)),a=d.indices[1]}return u+=f(t.substring(a,t.length)),u},e.txt.autoLinkWithJSON=function(t,n,r){var i=[];for(var s in n)i=i.concat(n[s]);for(var o=0;o<i.length;o++)entity=i[o],entity.screen_name?entity.screenName=entity.screen_name:entity.text&&(entity.hashtag=entity.text);return e.txt.modifyIndicesFromUnicodeToUTF16(t,i),e.txt.autoLinkEntities(t,i,r)},e.txt.extractHtmlAttrsFromOptions=function(e){var t={};for(var n in e){var r=e[n];if(d[n])continue;v[n]&&(r=r?n:null);if(r==null)continue;t[n]=r}return t},e.txt.autoLink=function(t,n){var r=e.txt.extractEntitiesWithIndices(t,{extractUrlsWithoutProtocol:!1});return e.txt.autoLinkEntities(t,r,n)},e.txt.autoLinkUsernamesOrLists=function(t,n){var r=e.txt.extractMentionsOrListsWithIndices(t);return e.txt.autoLinkEntities(t,r,n)},e.txt.autoLinkHashtags=function(t,n){var r=e.txt.extractHashtagsWithIndices(t);return e.txt.autoLinkEntities(t,r,n)},e.txt.autoLinkCashtags=function(t,n){var r=e.txt.extractCashtagsWithIndices(t);return e.txt.autoLinkEntities(t,r,n)},e.txt.autoLinkUrlsCustom=function(t,n){var r=e.txt.extractUrlsWithIndices(t,{extractUrlsWithoutProtocol:!1});return e.txt.autoLinkEntities(t,r,n)},e.txt.removeOverlappingEntities=function(e){e.sort(function(e,t){return e.indices[0]-t.indices[0]});var t=e[0];for(var n=1;n<e.length;n++)t.indices[1]>e[n].indices[0]?(e.splice(n,1),n--):t=e[n]},e.txt.extractEntitiesWithIndices=function(t,n){var r=e.txt.extractUrlsWithIndices(t,n).concat(e.txt.extractMentionsOrListsWithIndices(t)).concat(e.txt.extractHashtagsWithIndices(t,{checkUrlOverlap:!1})).concat(e.txt.extractCashtagsWithIndices(t));return r.length==0?[]:(e.txt.removeOverlappingEntities(r),r)},e.txt.extractMentions=function(t){var n=[],r=e.txt.extractMentionsWithIndices(t);for(var i=0;i<r.length;i++){var s=r[i].screenName;n.push(s)}return n},e.txt.extractMentionsWithIndices=function(t){var n=[],r,i=e.txt.extractMentionsOrListsWithIndices(t);for(var s=0;s<i.length;s++)r=i[s],r.listSlug==""&&n.push({screenName:r.screenName,indices:r.indices});return n},e.txt.extractMentionsOrListsWithIndices=function(t){if(!t||!t.match(e.txt.regexen.atSigns))return[];var n=[],r;return t.replace(e.txt.regexen
.validMentionOrList,function(t,r,i,s,o,u,a){var f=a.slice(u+t.length);if(!f.match(e.txt.regexen.endMentionMatch)){o=o||"";var l=u+r.length,c=l+s.length+o.length+1;n.push({screenName:s,listSlug:o,indices:[l,c]})}}),n},e.txt.extractReplies=function(t){if(!t)return null;var n=t.match(e.txt.regexen.validReply);return!n||RegExp.rightContext.match(e.txt.regexen.endMentionMatch)?null:n[1]},e.txt.extractUrls=function(t,n){var r=[],i=e.txt.extractUrlsWithIndices(t,n);for(var s=0;s<i.length;s++)r.push(i[s].url);return r},e.txt.extractUrlsWithIndices=function(t,n){n||(n={extractUrlsWithoutProtocol:!0});if(!t||(n.extractUrlsWithoutProtocol?!t.match(/\./):!t.match(/:/)))return[];var r=[];while(e.txt.regexen.extractUrl.exec(t)){var i=RegExp.$2,s=RegExp.$3,o=RegExp.$4,u=RegExp.$5,a=RegExp.$7,f=e.txt.regexen.extractUrl.lastIndex,l=f-s.length;if(!o){if(!n.extractUrlsWithoutProtocol||i.match(e.txt.regexen.invalidUrlWithoutProtocolPrecedingChars))continue;var c=null,h=!1,p=0;u.replace(e.txt.regexen.validAsciiDomain,function(t){var n=u.indexOf(t,p);p=n+t.length,c={url:t,indices:[l+n,l+p]},h=t.match(e.txt.regexen.invalidShortDomain),h||r.push(c)});if(c==null)continue;a&&(h&&r.push(c),c.url=s.replace(u,c.url),c.indices[1]=f)}else s.match(e.txt.regexen.validTcoUrl)&&(s=RegExp.lastMatch,f=l+s.length),r.push({url:s,indices:[l,f]})}return r},e.txt.extractHashtags=function(t){var n=[],r=e.txt.extractHashtagsWithIndices(t);for(var i=0;i<r.length;i++)n.push(r[i].hashtag);return n},e.txt.extractHashtagsWithIndices=function(t,n){n||(n={checkUrlOverlap:!0});if(!t||!t.match(e.txt.regexen.hashSigns))return[];var r=[];t.replace(e.txt.regexen.validHashtag,function(t,n,i,s,o,u){var a=u.slice(o+t.length);if(a.match(e.txt.regexen.endHashtagMatch))return;var f=o+n.length,l=f+s.length+1;r.push({hashtag:s,indices:[f,l]})});if(n.checkUrlOverlap){var i=e.txt.extractUrlsWithIndices(t);if(i.length>0){var s=r.concat(i);e.txt.removeOverlappingEntities(s),r=[];for(var o=0;o<s.length;o++)s[o].hashtag&&r.push(s[o])}}return r},e.txt.extractCashtags=function(t){var n=[],r=e.txt.extractCashtagsWithIndices(t);for(var i=0;i<r.length;i++)n.push(r[i].cashtag);return n},e.txt.extractCashtagsWithIndices=function(t){if(!t||t.indexOf("$")==-1)return[];var n=[];return t.replace(e.txt.regexen.validCashtag,function(e,t,r,i,s,o){var u=s+t.length,a=u+i.length+1;n.push({cashtag:i,indices:[u,a]})}),n},e.txt.modifyIndicesFromUnicodeToUTF16=function(t,n){e.txt.convertUnicodeIndices(t,n,!1)},e.txt.modifyIndicesFromUTF16ToUnicode=function(t,n){e.txt.convertUnicodeIndices(t,n,!0)},e.txt.getUnicodeTextLength=function(t){return t.replace(e.txt.regexen.non_bmp_code_pairs," ").length},e.txt.convertUnicodeIndices=function(e,t,n){if(t.length==0)return;var r=0,i=0;t.sort(function(e,t){return e.indices[0]-t.indices[0]});var s=0,o=t[0];while(r<e.length){if(o.indices[0]==(n?r:i)){var u=o.indices[1]-o.indices[0];o.indices[0]=n?i:r,o.indices[1]=o.indices[0]+u,s++;if(s==t.length)break;o=t[s]}var a=e.charCodeAt(r);55296<=a&&a<=56319&&r<e.length-1&&(a=e.charCodeAt(r+1),56320<=a&&a<=57343&&r++),i++,r++}},e.txt.splitTags=function(e){var t=e.split("<"),n,r=[],i;for(var s=0;s<t.length;s+=1){i=t[s];if(!i)r.push("");else{n=i.split(">");for(var o=0;o<n.length;o+=1)r.push(n[o])}}return r},e.txt.hitHighlight=function(t,n,r){var i="em";n=n||[],r=r||{};if(n.length===0)return t;var s=r.tag||i,o=["<"+s+">","</"+s+">"],u=e.txt.splitTags(t),a,f,l="",c=0,h=u[0],p=0,d=0,v=!1,m=h,g=[],y,b,w,E,S;for(a=0;a<n.length;a+=1)for(f=0;f<n[a].length;f+=1)g.push(n[a][f]);for(y=0;y<g.length;y+=1){b=g[y],w=o[y%2],E=!1;while(h!=null&&b>=p+h.length)l+=m.slice(d),v&&b===p+m.length&&(l+=w,E=!0),u[c+1]&&(l+="<"+u[c+1]+">"),p+=m.length,d=0,c+=2,h=u[c],m=h,v=!1;!E&&h!=null?(S=b-p,l+=m.slice(d,S)+w,d=S,y%2===0?v=!0:v=!1):E||(E=!0,l+=w)}if(h!=null){d<m.length&&(l+=m.slice(d));for(y=c+1;y<u.length;y+=1)l+=y%2===0?u[y]:"<"+u[y]+">"}return l};var g=140,y=[s(65534),s(65279),s(65535),s(8234),s(8235),s(8236),s(8237),s(8238)];e.txt.getTweetLength=function(t,n){n||(n={short_url_length:22,short_url_length_https:23});var r=e.txt.getUnicodeTextLength(t),i=e.txt.extractUrlsWithIndices(t);e.txt.modifyIndicesFromUTF16ToUnicode(t,i);for(var s=0;s<i.length;s++)r+=i[s].indices[0]-i[s].indices[1],i[s].url.toLowerCase().match(e.txt.regexen.urlHasHttps)?r+=n.short_url_length_https:r+=n.short_url_length;return r},e.txt.isInvalidTweet=function(t){if(!t)return"empty";if(e.txt.getTweetLength(t)>g)return"too_long";for(var n=0;n<y.length;n++)if(t.indexOf(y[n])>=0)return"invalid_characters";return!1},e.txt.isValidTweetText=function(t){return!e.txt.isInvalidTweet(t)},e.txt.isValidUsername=function(t){if(!t)return!1;var n=e.txt.extractMentions(t);return n.length===1&&n[0]===t.slice(1)};var b=n(/^#{validMentionOrList}$/);e.txt.isValidList=function(e){var t=e.match(b);return!!t&&t[1]==""&&!!t[4]},e.txt.isValidHashtag=function(t){if(!t)return!1;var n=e.txt.extractHashtags(t);return n.length===1&&n[0]===t.slice(1)},e.txt.isValidUrl=function(t,n,r){n==null&&(n=!0),r==null&&(r=!0);if(!t)return!1;var i=t.match(e.txt.regexen.validateUrlUnencoded);if(!i||i[0]!==t)return!1;var s=i[1],o=i[2],u=i[3],a=i[4],f=i[5];return(!r||w(s,e.txt.regexen.validateUrlScheme)&&s.match(/^https?$/i))&&w(u,e.txt.regexen.validateUrlPath)&&w(a,e.txt.regexen.validateUrlQuery,!0)&&w(f,e.txt.regexen.validateUrlFragment,!0)?n&&w(o,e.txt.regexen.validateUrlUnicodeAuthority)||!n&&w(o,e.txt.regexen.validateUrlAuthority):!1},typeof module!="undefined"&&module.exports&&(module.exports=e.txt);if(typeof window!="undefined")if(window.twttr)for(var E in e)window.twttr[E]=e[E];else window.twttr=e}(),$.fn.charCounter=function(e,t){function i(n,i){n=$(n);var s=n.val().length;t.twitter&&(s=twttr.txt.getTweetLength(n.val())),t.disable&&(s>e?$(t.disable).attr("disabled","disabled"):$(t.disable).removeAttr("disabled")),t.delay>0?(r&&window.clearTimeout(r),r=window.setTimeout(function(){i.html(t.format.replace(/%1/,e-s))},t.delay)):i.html(t.format.replace(/%1/,e-s))}function s(e,t){n&&(window.clearTimeout(n),n=null),e.animate({opacity:.1},100,function(){$(this).animate({opacity:1},100)}),t&&(n=window.setTimeout(function(){s(e)},200))}e=e||100,t=$.extend({container:"<span></span>",classname:"charcounter",format:"(%1 characters remaining)",pulse:!0,delay:0,twitter:!1},t);var n,r;return this.each(function(){var e=t.container.match(/^<.+>$/)?$(t.container).insertAfter(this).addClass(t.classname):$(t.container);$(this).bind("keydown",function(){i(this,e)}).bind("keypress",function(){i(this,e)}).bind("keyup",function(){i(this,e)}).bind("focus",function(){i(this,e)}).bind("mouseover",function(){i(this,e)}).bind("mouseout",function(){i(this,e)}).bind("paste",function(){var t=this;setTimeout(function(){i(t,e)},10)}),this.addEventListener&&this.addEventListener("input",function(){i(this,e)},!1),i(this,e)})},jQuery.fn.DefaultValue=function(e,t,n){var t=t||"gray",n=n||"black";return this.each(function(){if(this.type!="text"&&this.type!="password"&&this.type!="textarea")return;var r=this;this.value==""&&(this.value=e,jQuery(this).css({color:t})),jQuery(this).focus(function(){if(this.value==e||this.value=="")this.value="",jQuery(this).css({color:n})}),jQuery(this).blur(function(){if(this.value==e||this.value=="")this.value=e,jQuery(this).css({color:t})}),jQuery(this).parents("form").each(function(){jQuery("input[type=submit]",this).click(function(){r.value==e&&(r.value="")}),jQuery(this).submit(function(){r.value==e&&(r.value="")})})})},function(e){e.fn.hoverIntent=function(t,n){var r={sensitivity:7,interval:100,timeout:0};r=e.extend(r,n?{over:t,out:n}:t);var i,s,o,u,a=function(e){i=e.pageX,s=e.pageY},f=function(t,n){n.hoverIntent_t=clearTimeout(n.hoverIntent_t);if(Math.abs(o-i)+Math.abs(u-s)<r.sensitivity)return e(n).unbind("mousemove",a),n.hoverIntent_s=1,r.over.apply(n,[t]);o=i,u=s,n.hoverIntent_t=setTimeout(function(){f(t,n)},r.interval)},l=function(e,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=0,r.out.apply(t,[e])},c=function(t){var n=(t.type=="mouseover"?t.fromElement:t.toElement)||t.relatedTarget;while(n&&n!=this)try{n=n.parentNode}catch(t){n=this}if(n==this)return!1;var i=jQuery.extend({},t),s=this;s.hoverIntent_t&&(s.hoverIntent_t=clearTimeout(s.hoverIntent_t)),t.type=="mouseover"?(o=i.pageX,u=i.pageY,e(s).bind("mousemove",a),s.hoverIntent_s!=1&&(s.hoverIntent_t=setTimeout(function(){f(i,s)},r.interval))):(e(s).unbind("mousemove",a),s.hoverIntent_s==1&&(s.hoverIntent_t=setTimeout(function(){l(i,s)},r.timeout)))};return this.mouseover(c).mouseout(c)}}(jQuery),function(e){function n(e,t){return e.nodeType==3?i(e,t):r(e,t)}function r(t,r){var t=e(t),i=t.clone().empty(),s;return t.contents().each(function(){var e=r-i.text().length;if(e==0)return;s=n(this,e),s&&i.append(s)}),i}function i(n,r){var i=s(n.data);t&&(i=i.replace(/^ /,"")),t=!!i.match(/ $/);var i=i.slice(0,r);return i=e("<div/>").text(i).html(),i}function s(e){return e.replace(/\s+/g," ")}function o(t){var n=e(t),r=n.children(":last");if(!r)return t;var i=r.css("display");return!i||i=="inline"?n:o(r)}function u(t){var n=e(t),r=n.children(":last");return r&&r.is("p")?r:t}var t=!0;e.fn.truncate=function(t){var r=e.extend({},e.fn.truncate.defaults,t);e(this).each(function(){var t=e.trim(s(e(this).text())).length;if(t<=r.max_length)return;var i=r.max_length-r.more.length-3,a=n(this,i),f=e(this).hide();a.insertAfter(f),o(a).append(' (<a href="#show more content">'+r.more+"</a>)"),u(f).append(' (<a href="#show less content">'+r.less+"</a>)"),a.find("a:last").click(function(){return a.hide(),f.show(),!1}),f.find("a:last").click(function(){return a.show(),f.hide(),!1})})},e.fn.truncate.defaults={max_length:100,more:"show all",less:"show less"}}(jQuery),function(e){function t(t,n){this.$element=e(t),this.options=n,this.enabled=!0,this.fixTitle()}t.prototype={show:function(){var t=this.getTitle();if(t&&this.enabled){var n=this.tip();n.find(".tipsy-inner")[this.options.html?"html":"text"](t),n[0].className="tipsy",n.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);var r=e.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),i=n[0].offsetWidth,s=n[0].offsetHeight,o=typeof this.options.gravity=="function"?this.options.gravity.call(this.$element[0]):this.options.gravity,u;switch(o.charAt(0)){case"n":u={top:r.top+r.height+this.options.offset,left:r.left+r.width/2-i/2};break;case"s":u={top:r.top-s-this.options.offset,left:r.left+r.width/2-i/2};break;case"e":u={top:r.top+r.height/2-s/2,left:r.left-i-this.options.offset};break;case"w":u={top:r.top+r.height/2-s/2,left:r.left+r.width+this.options.offset}}o.length==2&&(o.charAt(1)=="w"?u.left=r.left+r.width/2-15:u.left=r.left+r.width/2-i+15),n.css(u).addClass("tipsy-"+o),this.options.fade?n.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):n.css({visibility:"visible",opacity:this.options.opacity})}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){e(this).remove()}):this.tip().remove()},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("original-title")!="string")&&e.attr("original-title",e.attr("title")||"").removeAttr("title")},getTitle:function(){var e,t=this.$element,n=this.options;this.fixTitle();var e,n=this.options;return typeof n.title=="string"?e=t.attr(n.title=="title"?"original-title":n.title):typeof n.title=="function"&&(e=n.title.call(t[0])),e=(""+e).replace(/(^\s*|\s*$)/,""),e||n.fallback},tip:function(){return this.$tip||(this.$tip=e('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>')),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},e.fn.tipsy=function(n){function i(r){var i=e.data(r,"tipsy");return i||(i=new t(r,e.fn.tipsy.elementOptions(r,n)),e.data(r,"tipsy",i)),i}function s(){var e=i(this);e.hoverState="in",n.delayIn==0?e.show():(e.fixTitle(),setTimeout(function(){e.hoverState=="in"&&e.show()},n.delayIn))}function o(){var e=i(this);e.hoverState="out",n.delayOut==0?e.hide():setTimeout(function(){e.hoverState=="out"&&e.hide()},n.delayOut)}if(n===!0)return this.data("tipsy");if(typeof n=="string"){var r=this.data("tipsy");return r&&r[n](),this}n=e.extend({},e.fn.tipsy.defaults,n),n.live||this.each(function(){i(this)});if(n.trigger!="manual"){var u=n.live?"live":"bind",a=n.trigger=="hover"?"mouseenter":"focus",f=n.trigger=="hover"?"mouseleave":"blur";this[u](a,s)[u](f,o)}return this},e.fn.tipsy.defaults={delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover"},e.fn.tipsy.elementOptions=function(t,n){return e.metadata?e.extend({},n,e(t).metadata()):n},e.fn.tipsy.autoNS=function(){return e(this).offset().top>e(document).scrollTop()+e(window).height()/2?"s":"n"},e.fn.tipsy.autoWE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"e":"w"}}(jQuery),function(e){e.fn.autogrow=function(t){return this.filter("textarea").each(function(){var t=e(this),n=t.height(),r=t.css("lineHeight"),i=e("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:e(this).width()-parseInt(t.css("paddingLeft"))-parseInt(t.css("paddingRight")),fontSize:t.css("fontSize"),fontFamily:t.css("fontFamily"),lineHeight:t.css("lineHeight"),resize:"none"}).appendTo(document.body),s=function(){var t=function(e,t){for(var n=0,r="";n<t;n++)r+=e;return r},r=this.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(e){return t("&nbsp;",e.length-1)+" "});i.html(r),e(this).css("height",Math.max(i.height()+20,n))};e(this).change(s).keyup(s).keydown(s),s.apply(this)}),this}}(jQuery),jQuery.fn.confirm=function(e){e=jQuery.extend({msg:"Are you sure? ",stopAfter:"never",wrapper:"<span></span>",eventType:"click",dialogShow:"show",dialogSpeed:"",timeout:0},e),e.stopAfter=e.stopAfter.toLowerCase(),!e.stopAfter in["never","once","ok","cancel"]&&(e.stopAfter="never"),e.buttons=jQuery.extend({ok:"Yes",cancel:"No",wrapper:'<a href="#"></a>',separator:"/"},e.buttons);var t=e.eventType;return this.each(function(){var n=this,r=jQuery(n),i,s=function(){var e=jQuery._data(n,"events");if(!e&&n.href)r.bind("click",function(){document.location=n.href}),e=jQuery.data(n,"events");else if(!e)return;n._handlers=new Array;for(var i in e[t])n._handlers.push(e[t][i])},o=jQuery(e.buttons.wrapper).append(e.buttons.ok).click(function(){return e.timeout!=0&&clearTimeout(i),r.unbind(t,f),r.show(),a.hide(),n._handlers!=undefined&&jQuery.each(n._handlers,function(){r.click(this.handler)}),r.click(),e.stopAfter!="ok"&&e.stopAfter!="once"&&(r.unbind(t),r.one(t,f)),!1}),u=jQuery(e.buttons.wrapper).append(e.buttons.cancel).click(function(){return e.timeout!=0&&clearTimeout(i),e.stopAfter!="cancel"&&e.stopAfter!="once"&&r.one(t,f),r.show(),a.hide(),!1});e.buttons.cls&&(o.addClass(e.buttons.cls),u.addClass(e.buttons.cls));var a=jQuery(e.wrapper).append(e.msg).append(o).append(e.buttons.separator).append(u),f=function(){return jQuery(this).hide(),e.dialogShow!="show"&&a.hide(),a.insertBefore(this),a[e.dialogShow](e.dialogSpeed),e.timeout!=0&&(clearTimeout(i),i=setTimeout(function(){u.click(),r.one(t,f)},e.timeout)),!1};s(),r.unbind(t),n._confirm=f,n._confirmEvent=t,r.one(t,f)})},function(){(function(e){return NB.TinyMCE=function(){function r(){var r;jQuery().tinymce&&(r=e("body").prop("clientWidth"),r>n&&e(".textarea-tinymce").tinymce(t))}var t,n;return n=875,t={plugins:"fullscreen,paste,autosave",theme_advanced_buttons1:"formatselect,bold,italic,underline,strikethrough|,bullist,numlist,|,outdent,indent,blockquote,|,link,unlink,|,undo,redo,|,code,pastetext,pasteword,|,hr",theme_advanced_buttons2:"",theme_advanced_buttons3:"",theme_advanced_buttons4:"",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"bottom",theme_advanced_resizing:!0,theme_advanced_resize_horizontal:!1,theme_advanced_blockformats:"p,div,h1,h2,h3,h4,h5,h6,blockquote,dt,dd,code,samp",fix_list_elements:!0,forced_root_block:"p",convert_urls:!1,relative_urls:!1,gecko_spellcheck:!0,valid_elements:"@[id|align|class|style|title|dir<ltr?rtl|lang|xml::lang],a[rel|rev|charset|hreflang|tabindex|accesskey|type|name|href|target|title|class],strong/b,em/i,strike,u,mark,div,-span,#p,-ol[type|compact],-ul[type|compact],-li,br,-sub,-sup,-blockquote,img[longdesc|usemap|src|border|alt=|title|hspace|vspace|width|height|align],-table[border|cellspacing|cellpadding|width|frame|rules|height|align|summary|bgcolor|background|bordercolor],-tr[rowspan|width|height|align|valign|bgcolor|background|bordercolor],tbody,thead,tfoot,#td[colspan|rowspan|width|height|align|valign|bgcolor|background|bordercolor|scope],#th[colspan|rowspan|width|height|align|valign|scope],-code,-pre,address,-h1,-h2,-h3,-h4,-h5,-h6,hr[size|noshade],-font[face|size|color],caption,dd,dl,dt,cite,abbr,acronym,del[datetime|cite],ins[datetime|cite],map[name],area[shape|coords|href|alt|target],bdo,button,col[align|char|charoff|span|valign|width],colgroup[align|char|charoff|span|valign|width],kbd,label[for],legend,noscript,q[cite],samp,small,tt,var,big",content_css:"/assets/tiny_mce.css",width:"100%"},r}(),e(function(){return new NB.TinyMCE})})(jQuery)}.call(this),function(){(function(e,t){var n,r,i,s,o,u;return n={},NB.GeoMap=NB.GeoMap||n,o=t||{},r={lat:29.532804,lng:-55.491477},i=function(){return _.isEmpty(o)&&(typeof console!="undefined"&&console!==null&&console.error("google maps not enabled"),!1),!0},n.v3Enabled=function(){return!_.isEmpty(o)},n.map=function(e,t){var n,a,f,l,c,h,p,d,v;return t==null&&(t={}),i()?(l={},c={},t=_.defaults(t,{lat:r.lat,lng:r.lng,zoom:2,type:"road"}),d=null,l=new o.Map(e.get(0),{center:s(t.lat,t.lng),zoom:t.zoom,mapTypeId:u(t.type)}),v=function(){return _.keys(c).length},t.infoWindow!=null&&(o.event.addListener(l,"click",function(){return t.infoWindow.close()}),o.event.addListener(t.infoWindow,"closeclick",function(){var e;if(d)return e=_.isFunction(d.getPosition)?d.getPosition():d,l.panTo(e),d=null})),n=function(e,t){var n,r,i;return t=_.defaults(t,{position:e,map:l}),i=new o.Marker(t),n=t.event,(n!=null?n.callback:void 0)!=null&&(r=n.type||"click",o.event.addListener(i,r,_.bind(n.callback,i,l,i))),i},f=function(e){return _.has(e,"position")?e.getPosition():e},p=function(){var e,t,n,r,i,s;return s=Math.pow(2,l.getZoom()),r=l.getProjection(),e=l.getBounds(),i=[e.getNorthEast().lat(),e.getSouthWest().lng()],t=i[0],n=i[1],{proj:r,nwCorner:r.fromLatLngToPoint(new o.LatLng(t,n)),scale:s}},a=function(e){var t,n,r,i,s;return i=p(),r=i.proj,t=i.nwCorner,s=i.scale,n=r.fromLatLngToPoint(f(e)),new o.Point(Math.floor((n.x-t.x)*s),Math.floor((n.y-t.y)*s))},h={addMarker:function(e,t,r){var i,o;return r==null&&(r={}),r=_.defaults(r,{zoom:!1}),_.isEmpty(l)?(typeof console!="undefined"&&console!==null&&console.error("map has not been intialized"),!1):(o=r.id||v(),i=s(e,t),c[o]=n(i,r),r.zoom&&(l.panTo(i),l.setZoom(r.zoom)),c[o])},getMarkers:function(){return c},getMarker:function(e){return c[e]},totalMarkers:function(){return v},getMap:function(){return l},fromLatLngToPixel:a,setReturnPosition:function(){return d=l.getCenter()}},h):{}},s=function(e,t){e=parseFloat(e),t=parseFloat(t);if(e&&t)return new o.LatLng(e,t)},u=function(e){switch(e){case"road":return o.MapTypeId.ROADMAP;case"satellite":return o.MapTypeId.SATELLITE;case"hybrid":return o.MapTypeId.HYBRID;case"terrain":return o.MapTypId.TERRAIN;default:return{}}}})(jQuery,typeof google!="undefined"&&google!==null?google.maps:void 0)}.call(this),NB.GeoMap=NB.GeoMap||{},NB.GeoMap.numberedMarkerOffsets={0:[0,2872],"00":[0,2386],"01":[0,1576],"02":[0,1063],"03":[0,523],"04":[0,1279],"05":[0,712],"06":[0,2521],"07":[0,1846],"08":[0,2035],"09":[0,2143],1:[0,2980],2:[0,2818],3:[0,2899],4:[0,2953],5:[0,2764],6:[0,2791],7:[0,2845],8:[0,2737],9:[0,2926],10:[0,2170],11:[0,2413],12:[0,955],13:[0,1090],14:[0,2575],15:[0,1117],16:[0,1711],17:[0,1738],18:[0,1603],19:[0,550],20:[0,253],21:[0,1387],22:[0,361],23:[0,577],24:[0,1954],25:[0,91],26:[0,685],27:[0,280],28:[0,982],29:[0,64],30:[0,2062],31:[0,2089],32:[0,793],33:[0,2278],34:[0,2197],35:[0,1144],36:[0,2224],37:[0,1171],38:[0,1630],39:[0,1198],40:[0,2305],41:[0,1036],42:[0,172],43:[0,1414],44:[0,2332],45:[0,604],46:[0,1873],47:[0,415],48:[0,1306],49:[0,442],50:[0,388],51:[0,307],52:[0,145],53:[0,334],54:[0,820],55:[0,631],56:[0,658],57:[0,1225],58:[0,469],59:[0,37],60:[0,2440],61:[0,2710],62:[0,1333],63:[0,739],64:[0,2629],65:[0,1657],66:[0,2656],67:[0,2359],68:[0,2467],69:[0,2251],70:[0,2683],71:[0,1981],72:[0,1441],73:[0,1360],74:[0,2116],75:[0,1468],76:[0,2494],77:[0,1765],78:[0,1792],79:[0,199],80:[0,2548],81:[0,1900],82:[0,2602],83:[0,1495],84:[0,847],85:[0,496],86:[0,2008],87:[0,1819],88:[0,766],89:[0,1927],90:[0,1009],91:[0,874],92:[0,226],93:[0,901],94:[0,1684],95:[0,118],96:[0,1252],97:[0,928],98:[0,1522],99:[0,1549],"99plus":[0,0]};var GeoMap=NB.GeoMap||{};(function(e,t,n){"use strict";var r=n;GeoMap.gTupleBuilder=function(e,n){if(!t.isUndefined(n)&&!t.isArray(n))throw"gTupleBuilder only accepts arrays as defined defaults";return function(r){return r=r||n,t.isUndefined(r)?!1:new e(t.first(r),t.last(r))}},GeoMap.Icon=function(e){e=e||"d3n8a8pro7vhmx.cloudfront.net";if(t.isEmpty(r))throw"GeoMap.Icon cannot be initialized - googl.maps undefined";this.numberedMarkerOffsets=NB.GeoMap.numberedMarkerOffsets||{},this.numberedMarkerSpriteUrl=["/",e,"assets/maps/markers/numbered-sprite.png"].join("/"),this.colorMarkerOffsets={blue:[0,120],gray:[0,60],green:[0,20],purple:[0,40],red:[0,80],shadow:[0,140],yellow:[0,100],lightblue:[0,0]},this.colorMarkerSpriteUrl=["/",e,"assets/maps/markers/colors-sprite.png"].join("/"),this.colorMarkerSize=function(e){return"shadow"===e?[22,20]:[12,20]}},GeoMap.Icon.prototype={withColor:function(e){return this.createIcon({url:this.colorMarkerSpriteUrl,size:this.colorMarkerSize(e),origin:this.colorMarkerOffsets[e],anchor:[6,21]})},withNumber:function(e){var n={size:[16,27],anchor:[7,27]};return e>99&&(n.size=[22,37],n.anchor=[10,37],e="99plus"),t.isUndefined(this.numberedMarkerOffsets[e])?this.withColor("red"):this.createIcon(t.extend(n,{url:this.numberedMarkerSpriteUrl,origin:this.numberedMarkerOffsets[e]}))},shadow:function(e){return this.withColor("shadow")},createIcon:function(e){var n=GeoMap.gTupleBuilder(r.Point,[0,0]),i=GeoMap.gTupleBuilder(r.Size);t.isUndefined(e.url)&&console.warn("Creating an icon without an image url is silly");var s=[["anchor",n(e.anchor)],["origin",n(e.origin)],["scaledSize",i(e.scaledSize)],["size",i(e.size)],["url",e.url]];return t.object(t.filter(s,function(e){return!t.isEqual(!1,t.last(e))}))}}})(jQuery,_,typeof google=="undefined"?{}:google.maps);